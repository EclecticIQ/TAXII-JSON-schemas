{
    "$schema": "http://json-schema.org/draft-04/schema",

    "title": "Schema for a Status Message",
    "type": "object",

    "allOf": [
        {"$ref": "file:response.json"}
    ],

    "definitions": {
        "service-instance": {
            "$ref": "file:service-instance.json"
        }
    },

    "required": ["message_id", "in_response_to"],

    "properties": {
        "status_type": {
            "enum": [
                "ASYNCHRONOUS_POLL_ERROR", "BAD_MESSAGE", "DENIED",
                "DESTINATION_COLLECTION_ERROR", "FAILURE", "INVALID_RESPONSE_PART",
                "NETWORK_ERROR", "NOT_FOUND", "PENDING", "POLLING_UNSUPPORTED",
                "RETRY", "SUCCESS", "UNAUTHORIZED",

                "UNSUPPORTED_MESSAGE", "UNSUPPORTED_CONTENT", "UNSUPPORTED_PROTOCOL",
                "UNSUPPORTED_QUERY"
            ]
        },
        "message": {
            "type" : "string"
        },
        "status_details": {
            "type" : "object",
            "additionalProperties": true,
            "properties": {
                "ACCEPTABLE_DESTINATIONS": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 0,
                    "uniqueItems": true
                },
                "MAX_PART_NUMBER": {
                    "type": "integer"
                },
                "ITEM": {
                    "type": "string"
                },
                "ESTIMATED_WAIT": {
                    "type": "integer"
                },
                "RESULT_ID": {
                    "type": "string"
                },
                "WILL_PUSH": {
                    "type": "boolean"
                },
                "SUPPORTED_BINDING": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 0,
                    "uniqueItems": true
                },
                "SUPPORTED_CONTENT": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 0,
                    "uniqueItems": true
                },
                "SUPPORTED_PROTOCOL": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 0,
                    "uniqueItems": true
                },
                "SUPPORTED_QUERY": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "minItems": 0,
                    "uniqueItems": true
                }
            }
        }
    }
}

